import asyncio
import random
from collections import deque
import requests
from pyrogram import *
from pyrogram import Client, filters
from pyrogram.errors.exceptions.flood_420 import FloodWait
from pyrogram.types import *
from pyrogram.types import Message

from Pbxbot.bad.bad import edit_or_reply, get_text
from Pbxbot.bad.constants import MEMES
from . import *

DEFAULTUSER = "Man"

@on_message("box", allow_stan=True)
async def boxs(client: Client, message: Message):
     if event.fwd_from:
        return
    event = await edit_or_reply(event, "`boxs...`")
    deq = deque(list("ğŸŸ¥ğŸŸ§ğŸŸ¨ğŸŸ©ğŸŸ¦ğŸŸªğŸŸ«â¬›â¬œ"))
    for _ in range(999):
        await asyncio.sleep(0.3)
        await event.edit("".join(deq))
        deq.rotate(1)


@on_message("rain", allow_stan=True)
async def raining(client: Client, message: Message):
    if message.forward_from:
        return
    event = await edit_or_reply(event, "`Raining.......`")
    deq = deque(list("ğŸŒ¬â˜ï¸ğŸŒ©ğŸŒ¨ğŸŒ§ğŸŒ¦ğŸŒ¥â›…ğŸŒ¤"))
    for _ in range(48):
        await asyncio.sleep(0.3)
        await event.edit("".join(deq))
        deq.rotate(1)


@on_message("deploy", allow_stan=True)
async def bot(client: Client, message: Message):
   if message.forward_from:
        return
    animation_interval = 3
    animation_ttl = range(12)
    event = await edit_or_reply(event, "`Deploying...`")
    animation_chars = [
     "**Heroku Connecting To Latest [Github Build](Badhacker98/PBX_2.0)**",
            f"**Build started by user** {DEFAULTUSER}",
            f"**Deploy** `535a74f0` **by user** **{DEFAULTUSER}**",
            "**Restarting Heroku Server...**",
            "**State changed from up to starting**",    
            "**Stopping all processes with SIGTERM**",
            "**Process exited with** `status 143`",
            "**Starting process with command** `python3 -m stdborg`",
            "**State changed from starting to up**",
            "__INFO:PbxáºÃ¸â€ :Logged in as 557667062__",
            "__INFO:PbxáºÃ¸â€ :Successfully loaded all plugins__",
            "**Build Succeeded**",
    ]
    for i in animation_ttl:
        await asyncio.sleep(animation_interval)
        await event.edit(animation_chars[i % 12])


@on_message("dump", allow_stan=True)
async def dump(client: Client, message: Message):
    if message.forward_from:
        return
    try:
        obj = message.pattern_match.group(1)
        if len(obj) != 3:
            raise IndexError
        inp = " ".join(obj)
    except IndexError:
        inp = "ğŸ¥ ğŸ‚ ğŸ«"
    event = await edit_or_reply(message, "`droping....`")
    u, t, g, o, s, n = inp.split(), "ğŸ—‘", "<(^_^ <)", "(> ^_^)>", "â € ", "\n"
    h = [(u[0], u[1], u[2]), (u[0], u[1], ""), (u[0], "", "")]
    for something in reversed(
        [
            y
            for y in (
                [
                    "".join(x)
                    for x in (
                        f + (s, g, s + s * f.count(""), t),
                        f + (g, s * 2 + s * f.count(""), t),
                        f[:i] + (o, f[i], s * 2 + s * f.count(""), t),
                        f[:i] + (s + s * f.count(""), o, f[i], s, t),
                        f[:i] + (s * 2 + s * f.count(""), o, f[i], t),
                        f[:i] + (s * 3 + s * f.count(""), o, t),
                        f[:i] + (s * 3 + s * f.count(""), g, t),
                    )
                ]
                for i, f in enumerate(reversed(h))
            )
        ]
    ):
        for something_else in something:
            await asyncio.sleep(0.3)
            try:
                await event.edit(something_else)
            except errors.MessageIdInvalidError:
                return


@on_message("plain", allow_stan=True)
async def plain(client: Client, message: Message):
    if message.forward_from:
        return
    event = await edit_or_reply(event, "Wait for plane...")
    await event.edit("âœˆ-------------")
    await event.edit("-âœˆ------------")
    await event.edit("--âœˆ-----------")
    await event.edit("---âœˆ----------")
    await event.edit("----âœˆ---------")
    await event.edit("-----âœˆ--------")
    await event.edit("------âœˆ-------")
    await event.edit("-------âœˆ------")
    await event.edit("--------âœˆ-----")
    await event.edit("---------âœˆ----")
    await event.edit("----------âœˆ---")
    await event.edit("-----------âœˆ--")
    await event.edit("------------âœˆ-")
    await event.edit("-------------âœˆ")
    await asyncio.sleep(3)



@on_message("police", allow_stan=True)
async def police(client: Client, message: Message):
    if message.forward_from:
        return
    animation_interval = 0.3
    animation_ttl = range(12)
    event = await edit_or_reply(event, "Police")
    animation_chars = [
        "ğŸ”´ğŸ”´ğŸ”´â¬œâ¬œâ¬œğŸ”µğŸ”µğŸ”µ\nğŸ”´ğŸ”´ğŸ”´â¬œâ¬œâ¬œğŸ”µğŸ”µğŸ”µ\nğŸ”´ğŸ”´ğŸ”´â¬œâ¬œâ¬œğŸ”µğŸ”µğŸ”µ",
        "ğŸ”µğŸ”µğŸ”µâ¬œâ¬œâ¬œğŸ”´ğŸ”´ğŸ”´\nğŸ”µğŸ”µğŸ”µâ¬œâ¬œâ¬œğŸ”´ğŸ”´ğŸ”´\nğŸ”µğŸ”µğŸ”µâ¬œâ¬œâ¬œğŸ”´ğŸ”´ğŸ”´",
        "ğŸ”´ğŸ”´ğŸ”´â¬œâ¬œâ¬œğŸ”µğŸ”µğŸ”µ\nğŸ”´ğŸ”´ğŸ”´â¬œâ¬œâ¬œğŸ”µğŸ”µğŸ”µ\nğŸ”´ğŸ”´ğŸ”´â¬œâ¬œâ¬œğŸ”µğŸ”µğŸ”µ",
        "ğŸ”µğŸ”µğŸ”µâ¬œâ¬œâ¬œğŸ”´ğŸ”´ğŸ”´\nğŸ”µğŸ”µğŸ”µâ¬œâ¬œâ¬œğŸ”´ğŸ”´ğŸ”´\nğŸ”µğŸ”µğŸ”µâ¬œâ¬œâ¬œğŸ”´ğŸ”´ğŸ”´",
        "ğŸ”´ğŸ”´ğŸ”´â¬œâ¬œâ¬œğŸ”µğŸ”µğŸ”µ\nğŸ”´ğŸ”´ğŸ”´â¬œâ¬œâ¬œğŸ”µğŸ”µğŸ”µ\nğŸ”´ğŸ”´ğŸ”´â¬œâ¬œâ¬œğŸ”µğŸ”µğŸ”µ",
        "ğŸ”µğŸ”µğŸ”µâ¬œâ¬œâ¬œğŸ”´ğŸ”´ğŸ”´\nğŸ”µğŸ”µğŸ”µâ¬œâ¬œâ¬œğŸ”´ğŸ”´ğŸ”´\nğŸ”µğŸ”µğŸ”µâ¬œâ¬œâ¬œğŸ”´ğŸ”´ğŸ”´",
        "ğŸ”´ğŸ”´ğŸ”´â¬œâ¬œâ¬œğŸ”µğŸ”µğŸ”µ\nğŸ”´ğŸ”´ğŸ”´â¬œâ¬œâ¬œğŸ”µğŸ”µğŸ”µ\nğŸ”´ğŸ”´ğŸ”´â¬œâ¬œâ¬œğŸ”µğŸ”µğŸ”µ",
        "ğŸ”µğŸ”µğŸ”µâ¬œâ¬œâ¬œğŸ”´ğŸ”´ğŸ”´\nğŸ”µğŸ”µğŸ”µâ¬œâ¬œâ¬œğŸ”´ğŸ”´ğŸ”´\nğŸ”µğŸ”µğŸ”µâ¬œâ¬œâ¬œğŸ”´ğŸ”´ğŸ”´",
        "ğŸ”´ğŸ”´ğŸ”´â¬œâ¬œâ¬œğŸ”µğŸ”µğŸ”µ\nğŸ”´ğŸ”´ğŸ”´â¬œâ¬œâ¬œğŸ”µğŸ”µğŸ”µ\nğŸ”´ğŸ”´ğŸ”´â¬œâ¬œâ¬œğŸ”µğŸ”µğŸ”µ",
        "ğŸ”µğŸ”µğŸ”µâ¬œâ¬œâ¬œğŸ”´ğŸ”´ğŸ”´\nğŸ”µğŸ”µğŸ”µâ¬œâ¬œâ¬œğŸ”´ğŸ”´ğŸ”´\nğŸ”µğŸ”µğŸ”µâ¬œâ¬œâ¬œğŸ”´ğŸ”´ğŸ”´",
        "ğŸ”´ğŸ”´ğŸ”´â¬œâ¬œâ¬œğŸ”µğŸ”µğŸ”µ\nğŸ”´ğŸ”´ğŸ”´â¬œâ¬œâ¬œğŸ”µğŸ”µğŸ”µ\nğŸ”´ğŸ”´ğŸ”´â¬œâ¬œâ¬œğŸ”µğŸ”µğŸ”µ",
    ]
    for i in animation_ttl:
        await asyncio.sleep(animation_interval)
        await event.edit(animation_chars[i % 12])


@on_message("jio", allow_stan=True)
async def jio(client: Client, message: Message):
    if message.forward_from:
        return
    animation_interval = 1
    animation_ttl = range(19)
    event = await edit_or_reply(event, "jio network boosting 5G ...")
    animation_chars = [
        "`Connecting To JIO NETWORK 5G ....`",
        "`â–ˆ â–‡ â–† â–… â–„ â–‚ â–`",
        "`â–’ â–‡ â–† â–… â–„ â–‚ â–`",
        "`â–’ â–’ â–† â–… â–„ â–‚ â–`",
        "`â–’ â–’ â–’ â–… â–„ â–‚ â–`",
        "`â–’ â–’ â–’ â–’ â–„ â–‚ â–`",
        "`â–’ â–’ â–’ â–’ â–’ â–‚ â–`",
        "`â–’ â–’ â–’ â–’ â–’ â–’ â–`",
        "`â–’ â–’ â–’ â–’ â–’ â–’ â–’`",
        "*Optimising JIO NETWORK 5G...*",
        "`â–’ â–’ â–’ â–’ â–’ â–’ â–’`",
        "`â– â–’ â–’ â–’ â–’ â–’ â–’`",
        "`â– â–‚ â–’ â–’ â–’ â–’ â–’`",
        "`â– â–‚ â–„ â–’ â–’ â–’ â–’`",
        "`â– â–‚ â–„ â–… â–’ â–’ â–’`",
        "`â– â–‚ â–„ â–… â–† â–’ â–’`",
        "`â– â–‚ â–„ â–… â–† â–‡ â–’`",
        "`â– â–‚ â–„ â–… â–† â–‡ â–ˆ`",
        "**JIO NETWORK Boosted 5G....**",
    ]
    for i in animation_ttl:
        await asyncio.sleep(animation_interval)
        await event.edit(animation_chars[i % 19])


@on_message("solarsystem", allow_stan=True)
async def solarsystem(client: Client, message: Message):
    if message.forward_from:
        return
    animation_interval = 0.1
    animation_ttl = range(80)
    event = await edit_or_reply(event, "solarsystem")
    animation_chars = [
        "`â—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸\nâ—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸â˜€\nâ—¼ï¸â—¼ï¸ğŸŒâ—¼ï¸â—¼ï¸\nğŸŒ•â—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸\nâ—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸`",
        "`â—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸\nğŸŒ•â—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸\nâ—¼ï¸â—¼ï¸ğŸŒâ—¼ï¸â—¼ï¸\nâ—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸â˜€\nâ—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸`",
        "`â—¼ï¸ğŸŒ•â—¼ï¸â—¼ï¸â—¼ï¸\nâ—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸\nâ—¼ï¸â—¼ï¸ğŸŒâ—¼ï¸â—¼ï¸\nâ—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸\nâ—¼ï¸â—¼ï¸â—¼ï¸â˜€â—¼ï¸`",
        "`â—¼ï¸â—¼ï¸â—¼ï¸ğŸŒ•â—¼ï¸\nâ—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸\nâ—¼ï¸â—¼ï¸ğŸŒâ—¼ï¸â—¼ï¸\nâ—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸\nâ—¼ï¸â˜€â—¼ï¸â—¼ï¸â—¼ï¸`",
        "`â—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸\nâ—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸ğŸŒ•\nâ—¼ï¸â—¼ï¸ğŸŒâ—¼ï¸â—¼ï¸\nâ˜€â—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸\nâ—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸`",
        "`â—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸\nâ˜€â—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸\nâ—¼ï¸â—¼ï¸ğŸŒâ—¼ï¸â—¼ï¸\nâ—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸ğŸŒ•\nâ—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸`",
        "`â—¼ï¸â˜€â—¼ï¸â—¼ï¸â—¼ï¸\nâ—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸\nâ—¼ï¸â—¼ï¸ğŸŒâ—¼ï¸â—¼ï¸\nâ—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸\nâ—¼ï¸â—¼ï¸â—¼ï¸ğŸŒ•â—¼ï¸`",
        "`â—¼ï¸â—¼ï¸â—¼ï¸â˜€â—¼ï¸\nâ—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸\nâ—¼ï¸â—¼ï¸ğŸŒâ—¼ï¸â—¼ï¸\nâ—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸â—¼ï¸\nâ—¼ï¸ğŸŒ•â—¼ï¸â—¼ï¸â—¼ï¸`",
    ]
    for i in animation_ttl:
        await asyncio.sleep(animation_interval)
        await event.edit(animation_chars[i % 8])
        

@on_message("music", allow_stan=True)
async def music(client: Client, message: Message):
    if message.forward_from:
        return
    animation_interval = 1.5
    animation_ttl = range(11)
    event = await edit_or_reply(event, "starting player...")
    animation_chars = [
        "â¬¤â¬¤â¬¤ 81% â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €`âœ–ï¸`\n\nâ €â €â €â €â €[Music Player](t.me/LEGENDBOT_official)\n\nâ €â €â €â €**Now Playing:shape of u**\n\n**00:00** â–±â–±â–±â–±â–±â–±â–±â–±â–±â–± **00:10**\n\nâ €â €â €â €â €`ğŸ”‚` `â®ï¸` `âªï¸` `â–¶ï¸` `â©ï¸` `â­ï¸`\n\n**â €Next Song:** __Alan Walker - Alone.__\n\nâ €â €â €â €**â €Device: I Fone XXX**",
        "â¬¤â¬¤â¬¤ 81% â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €`âœ–ï¸`\n\nâ €â €â €â €â €[Music Player](t.me/LEGENDBOT_official)\n\nâ €â €â €â €**Now Playing:shape of u**\n\n**00:01** â–°â–±â–±â–±â–±â–±â–±â–±â–±â–± **00:10**\n\nâ €â €â €â €â €`ğŸ”‚` `â®ï¸` `âªï¸` `â¸ï¸` `â©ï¸` `â­ï¸`\n\n**â €Next Song:** __Alan Walker - Alone.__\n\nâ €â €â €â €**â €Device: Ifone XXX**",
        "â¬¤â¬¤â¬¤ 81% â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €`âœ–ï¸`\n\nâ €â €â €â €â €[Music Player](t.me/LEGENDBOT_official)\n\nâ €â €â €â €**Now Playing:shape of u**\n\n**00:02** â–°â–°â–±â–±â–±â–±â–±â–±â–±â–± **00:10**\n\nâ €â €â €â €â €`ğŸ”‚` `â®ï¸` `âªï¸` `â¸ï¸` `â©ï¸` `â­ï¸`\n\n**â €Next Song:** __Alan Walker - Alone.__\n\nâ €â €â €â €**â €Device: Ifone XXX**",
        "â¬¤â¬¤â¬¤ 81% â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €`âœ–ï¸`\n\nâ €â €â €â €â €[Music Player](t.me/LEGENDBOT_official)\n\nâ €â €â €â €**Now Playing:shape of u**\n\n**00:03** â–°â–°â–°â–±â–±â–±â–±â–±â–±â–± **00:10**\n\nâ €â €â €â €â €`ğŸ”‚` `â®ï¸` `âªï¸` `â¸ï¸` `â©ï¸` `â­ï¸`\n\n**â €Next Song:** __Alan Walker - Alone.__\n\nâ €â €â €â €**â €Device: Ifone XXX**",
        "â¬¤â¬¤â—¯ 80% â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €`âœ–ï¸`\n\nâ €â €â €â €â €[Music Player](t.me/LEGENDBOT_official)\n\nâ €â €â €â €**Now Playing:shape of u**\n\n**00:04** â–°â–°â–°â–°â–±â–±â–±â–±â–±â–± **00:10**\n\nâ €â €â €â €â €`ğŸ”‚` `â®ï¸` `âªï¸` `â¸ï¸` `â©ï¸` `â­ï¸`\n\n**â €Next Song:** __Alan Walker - Alone.__\n\nâ €â €â €â €**â €Device: Ifone XXX**",
        "â¬¤â¬¤â—¯ 80% â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €`âœ–ï¸`\n\nâ €â €â €â €â €[Music Player](t.me/LEGENDBOT_official)\n\nâ €â €â €â €**Now Playing:shape of u**\n\n**00:05** â–°â–°â–°â–°â–±â–±â–±â–±â–±â–± **00:10**\n\nâ €â €â €â €â €`ğŸ”‚` `â®ï¸` `âªï¸` `â¸ï¸` `â©ï¸` `â­ï¸`\n\n**â €Next Song:** __Alan Walker - Alone.__\n\nâ €â €â €â €**â €Device: Ifone XXX**",
        "â¬¤â¬¤â—¯ 80% â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €`âœ–ï¸`\n\nâ €â €â €â €â €[Music Player](t.me/LEGENDBOT_official)\n\nâ €â €â €â €**Now Playing:shape of u**\n\n**00:06** â–°â–°â–°â–°â–°â–°â–±â–±â–±â–± **00:10**\n\nâ €â €â €â €â €`ğŸ”‚` `â®ï¸` `âªï¸` `â¸ï¸` `â©ï¸` `â­ï¸`\n\n**â €Next Song:** __Alan Walker - Alone.__\n\nâ €â €â €â €**â €Device: Ifone XXX**",
        "â¬¤â¬¤â—¯ 80% â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €`âœ–ï¸`\n\nâ €â €â €â €â €[Music Player](t.me/LEGENDBOT_official)\n\nâ €â €â €â €**Now Playing:shape of u**\n\n**00:07** â–°â–°â–°â–°â–°â–°â–°â–±â–±â–± **00:10**\n\nâ €â €â €â €â €`ğŸ”‚` `â®ï¸` `âªï¸` `â¸ï¸` `â©ï¸` `â­ï¸`\n\n**â €Next Song:** __Alan Walker - Alone.__\n\nâ €â €â €â €**â €Device: Ifone XXX**",
        "â¬¤â¬¤â—¯ 80% â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €`âœ–ï¸`\n\nâ €â €â €â €â €[Music Player](t.me/LEGENDBOT_official)\n\nâ €â €â €â €**Now Playing:shape of u**\n\n**00:08** â–°â–°â–°â–°â–°â–°â–°â–°â–±â–± **00:10**\n\nâ €â €â €â €â €`ğŸ”‚` `â®ï¸` `âªï¸` `â¸ï¸` `â©ï¸` `â­ï¸`\n\n**â €Next Song:** __Alan Walker - Alone.__\n\nâ €â €â €â €**â €Device: Ifone XXX**",
        "â¬¤â¬¤â—¯ 80% â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €`âœ–ï¸`\n\nâ €â €â €â €â €[Music Player](t.me/LEGENDBOT_official)\n\nâ €â €â €â €**Now Playing:shape of u**\n\n**00:09** â–°â–°â–°â–°â–°â–°â–°â–°â–°â–± **00:10**\n\nâ €â €â €â €â €`ğŸ”‚` `â®ï¸` `âªï¸` `â¸ï¸` `â©ï¸` `â­ï¸`\n\n**â €Next Song:** __Alan Walker - Alone.__\n\nâ €â €â €â €**â €Device: Ifone XXX**",
        "â¬¤â¬¤â—¯ 80% â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €`âœ–ï¸`\n\nâ €â €â €â €â €[Music Player](t.me/LEGENDBOT_official)\n\nâ €â €â €â €**Now Playing:shape of u**\n\n**00:10** â–°â–°â–°â–°â–°â–°â–°â–°â–°â–° **00:10**\n\nâ €â €â €â €â €`ğŸ”‚` `â®ï¸` `âªï¸` `âºï¸` `â©ï¸` `â­ï¸`\n\n**â €Next Song:** __Alan Walker - Alone.__\n\nâ €â €â €â €**â €Device: Ifone XXX**",
    ]
    for i in animation_ttl:
        await asyncio.sleep(animation_interval)
        await event.edit(animation_chars[i % 11])
